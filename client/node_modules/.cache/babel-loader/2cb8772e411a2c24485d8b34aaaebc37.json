{"remainingRequest":"G:\\1WORK\\cockrid34r\\client\\node_modules\\babel-loader\\lib\\index.js!G:\\1WORK\\cockrid34r\\client\\node_modules\\cache-loader\\dist\\cjs.js??ref--1-0!G:\\1WORK\\cockrid34r\\client\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!G:\\1WORK\\cockrid34r\\client\\node_modules\\particles-bg-vue\\src\\particles-bg\\particles\\TadpoleParticles.vue?vue&type=script&lang=js&","dependencies":[{"path":"G:\\1WORK\\cockrid34r\\client\\node_modules\\particles-bg-vue\\src\\particles-bg\\particles\\TadpoleParticles.vue","mtime":1660813555620},{"path":"G:\\1WORK\\cockrid34r\\client\\babel.config.js","mtime":1660813200039},{"path":"G:\\1WORK\\cockrid34r\\client\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1660813139587},{"path":"G:\\1WORK\\cockrid34r\\client\\node_modules\\babel-loader\\lib\\index.js","mtime":1660813146986},{"path":"G:\\1WORK\\cockrid34r\\client\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1660813139587},{"path":"G:\\1WORK\\cockrid34r\\client\\node_modules\\vue-loader\\lib\\index.js","mtime":1660813157465}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IENhbnZhc0NvbXAgZnJvbSAiLi9DYW52YXNDb21wLnZ1ZSI7CmltcG9ydCBQcm90b24gZnJvbSAicHJvdG9uLWVuZ2luZSI7CmltcG9ydCBSQUZNYW5hZ2VyIGZyb20gInJhZi1tYW5hZ2VyIjsKaW1wb3J0IHsgZ2V0Q29sb3IgfSBmcm9tICIuLi91dGlscy9Db2xvciI7CmNvbnN0IGNvbG9ycyA9IFsiI2ZhZDM5MCIsICIjODFlY2VjIiwgIiNmZmZmZmYiLCAiI2JhZGM1OCIsICIjZjljYTI0IiwgIiNGRUE0N0YiXTsKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICJUYWRwb2xlUGFydGljbGVzIiwKICBjb21wb25lbnRzOiB7CiAgICBDYW52YXNDb21wCiAgfSwKICBwcm9wczogewogICAgY2FudmFzOiBPYmplY3QsCiAgICBiZzogQm9vbGVhbiwKICAgIGNvbG9yOiBTdHJpbmcsCiAgICBudW06IE51bWJlciwKICAgIGNvbmZpZzoge30KICB9LAogIG1ldGhvZHM6IHsKICAgIGNhbnZhc0luaXRlZChjYW52YXMpIHsKICAgICAgdGhpcy5jcmVhdGVQcm90b24oY2FudmFzKTsKICAgICAgUkFGTWFuYWdlci5hZGQodGhpcy5yZW5kZXJQcm90b24pOwogICAgfSwKCiAgICBjYW52YXNSZXNpemUoewogICAgICB3aWR0aCwKICAgICAgaGVpZ2h0CiAgICB9KSB7CiAgICAgIHRoaXMuY3Jvc3Nab25lQmVoYXZpb3VyLnpvbmUud2lkdGggPSB3aWR0aDsKICAgICAgdGhpcy5jcm9zc1pvbmVCZWhhdmlvdXIuem9uZS5oZWlnaHQgPSBoZWlnaHQ7CiAgICAgIHRoaXMucHJvdG9uLnJlbmRlcmVyc1swXS5yZXNpemUod2lkdGgsIGhlaWdodCk7CiAgICB9LAoKICAgIGNhbnZhc01vdXNlRG93bihlKSB7fSwKCiAgICBjcmVhdGVQcm90b24oY2FudmFzKSB7CiAgICAgIGNvbnN0IHdpZHRoID0gY2FudmFzLndpZHRoOwogICAgICBjb25zdCBoZWlnaHQgPSBjYW52YXMuaGVpZ2h0OwogICAgICB0aGlzLnByb3RvbiA9IG5ldyBQcm90b24oKTsKICAgICAgY29uc3QgZW1pdHRlciA9IG5ldyBQcm90b24uRW1pdHRlcigpOwogICAgICBlbWl0dGVyLmRhbXBpbmcgPSAwLjAwODsKICAgICAgZW1pdHRlci5yYXRlID0gbmV3IFByb3Rvbi5SYXRlKHRoaXMubnVtID8gdGhpcy5udW0gOiA1MCk7CiAgICAgIGVtaXR0ZXIuYWRkSW5pdGlhbGl6ZShuZXcgUHJvdG9uLk1hc3MoMSkpOwogICAgICBlbWl0dGVyLmFkZEluaXRpYWxpemUobmV3IFByb3Rvbi5SYWRpdXMoNSwgOSkpOwogICAgICBlbWl0dGVyLmFkZEluaXRpYWxpemUobmV3IFByb3Rvbi5WZWxvY2l0eShuZXcgUHJvdG9uLlNwYW4oMS41KSwgbmV3IFByb3Rvbi5TcGFuKDAsIDM2MCksICJwb2xhciIpKTsKICAgICAgZW1pdHRlci5hZGRJbml0aWFsaXplKG5ldyBQcm90b24uUG9zaXRpb24obmV3IFByb3Rvbi5SZWN0Wm9uZSgwLCAwLCB3aWR0aCwgaGVpZ2h0KSkpOwogICAgICBjb25zdCBtb3VzZUluZm8gPSB7CiAgICAgICAgeDogd2lkdGggLyAyLAogICAgICAgIHk6IGhlaWdodCAvIDIKICAgICAgfTsKICAgICAgY29uc3QgYXR0cmFjdGlvbkJlaGF2aW91ciA9IG5ldyBQcm90b24uQXR0cmFjdGlvbihtb3VzZUluZm8sIDAsIDApOwogICAgICBjb25zdCBjcm9zc1pvbmVCZWhhdmlvdXIgPSBuZXcgUHJvdG9uLkNyb3NzWm9uZShuZXcgUHJvdG9uLlJlY3Rab25lKDAsIDAsIGNhbnZhcy53aWR0aCwgY2FudmFzLmhlaWdodCksICJib3VuZCIpOwogICAgICBlbWl0dGVyLmFkZEJlaGF2aW91cihuZXcgUHJvdG9uLkNvbG9yKHRoaXMuY29sb3IgfHwgIiNiYmJiYmIiKSk7IC8vZW1pdHRlci5hZGRCZWhhdmlvdXIobmV3IFByb3Rvbi5BbHBoYShuZXcgUHJvdG9uLlNwYW4oMC41LCAxKSkpOwoKICAgICAgZW1pdHRlci5hZGRCZWhhdmlvdXIoYXR0cmFjdGlvbkJlaGF2aW91ciwgY3Jvc3Nab25lQmVoYXZpb3VyKTsKICAgICAgZW1pdHRlci5hZGRCZWhhdmlvdXIobmV3IFByb3Rvbi5SYW5kb21EcmlmdCgxNSwgMTUsIDAuMDUpKTsKICAgICAgZW1pdHRlci5lbWl0KCJvbmNlIik7CiAgICAgIHRoaXMucHJvdG9uLmFkZEVtaXR0ZXIoZW1pdHRlcik7CiAgICAgIHRoaXMucHJvdG9uLmFkZFJlbmRlcmVyKHRoaXMuY3JlYXRlUmVuZGVyZXIoY2FudmFzKSk7CiAgICAgIHRoaXMuY3Jvc3Nab25lQmVoYXZpb3VyID0gY3Jvc3Nab25lQmVoYXZpb3VyOwogICAgfSwKCiAgICBjcmVhdGVSZW5kZXJlcihjYW52YXMpIHsKICAgICAgY29uc3Qgam9pbnRDb3VudCA9IDEyOwogICAgICBjb25zdCBkZWxheVRpbWUgPSA2OwogICAgICBjb25zdCBjb250ZXh0ID0gY2FudmFzLmdldENvbnRleHQoIjJkIik7CiAgICAgIGNvbnN0IHJlbmRlcmVyID0gbmV3IFByb3Rvbi5DYW52YXNSZW5kZXJlcihjYW52YXMpOwoKICAgICAgcmVuZGVyZXIub25Qcm90b25VcGRhdGUgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgY29udGV4dC5jbGVhclJlY3QoMCwgMCwgY2FudmFzLndpZHRoLCBjYW52YXMuaGVpZ2h0KTsKICAgICAgfTsKCiAgICAgIHJlbmRlcmVyLm9uUGFydGljbGVDcmVhdGVkID0gcGFydGljbGUgPT4gewogICAgICAgIHBhcnRpY2xlLmRhdGEucG9pbnRzID0gW107CiAgICAgICAgcGFydGljbGUuZGF0YS5pbmRleCA9IDA7CiAgICAgIH07CgogICAgICByZW5kZXJlci5vblBhcnRpY2xlVXBkYXRlID0gZnVuY3Rpb24gKHBhcnRpY2xlKSB7CiAgICAgICAgZHJhd1RhZHBvbGVUYWlsKHBhcnRpY2xlKTsKICAgICAgICBpZiAocGFydGljbGUuZGF0YS5pbmRleCAlIGRlbGF5VGltZSA9PT0gMCkgZmlsbFBvaW50c0RhdGEocGFydGljbGUpOwogICAgICAgIGRyYXdUYWRwb2xlSGVhZChwYXJ0aWNsZSk7CiAgICAgICAgcGFydGljbGUuZGF0YS5pbmRleCsrOwogICAgICB9OwoKICAgICAgY29uc3QgZmlsbFBvaW50c0RhdGEgPSBwYXJ0aWNsZSA9PiB7CiAgICAgICAgcGFydGljbGUuZGF0YS5wb2ludHMudW5zaGlmdChwYXJ0aWNsZS5wLnkpOwogICAgICAgIHBhcnRpY2xlLmRhdGEucG9pbnRzLnVuc2hpZnQocGFydGljbGUucC54KTsKCiAgICAgICAgaWYgKHBhcnRpY2xlLmRhdGEucG9pbnRzLmxlbmd0aCA+IGpvaW50Q291bnQpIHsKICAgICAgICAgIHBhcnRpY2xlLmRhdGEucG9pbnRzLnBvcCgpOwogICAgICAgICAgcGFydGljbGUuZGF0YS5wb2ludHMucG9wKCk7CiAgICAgICAgfQogICAgICB9OwoKICAgICAgY29uc3QgZHJhd1RhZHBvbGVIZWFkID0gcGFydGljbGUgPT4gewogICAgICAgIGNvbnRleHQuZmlsbFN0eWxlID0gcGFydGljbGUuY29sb3I7CiAgICAgICAgY29udGV4dC5iZWdpblBhdGgoKTsKICAgICAgICBjb250ZXh0LmFyYyhwYXJ0aWNsZS5wLngsIHBhcnRpY2xlLnAueSwgcGFydGljbGUucmFkaXVzLCAwLCBNYXRoLlBJICogMiwgdHJ1ZSk7CiAgICAgICAgY29udGV4dC5jbG9zZVBhdGgoKTsKICAgICAgICBjb250ZXh0LmZpbGwoKTsKICAgICAgfTsKCiAgICAgIGNvbnN0IGRyYXdUYWRwb2xlVGFpbCA9IHBhcnRpY2xlID0+IHsKICAgICAgICBjb250ZXh0LmJlZ2luUGF0aCgpOwogICAgICAgIGNvbnRleHQuc3Ryb2tlU3R5bGUgPSBwYXJ0aWNsZS5jb2xvcjsKICAgICAgICBjb250ZXh0Lm1vdmVUbyhwYXJ0aWNsZS5wLngsIHBhcnRpY2xlLnAueSk7CiAgICAgICAgY29uc3QgbCA9IHBhcnRpY2xlLmRhdGEucG9pbnRzLmxlbmd0aDsKCiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBsOyBpICs9IDIpIHsKICAgICAgICAgIGNvbnN0IHggPSBwYXJ0aWNsZS5kYXRhLnBvaW50c1tpXTsKICAgICAgICAgIGNvbnN0IHkgPSBwYXJ0aWNsZS5kYXRhLnBvaW50c1tpICsgMV07CiAgICAgICAgICBjb250ZXh0LmxpbmVXaWR0aCA9IGxpbmVhckV2YWx1YXRpb24oaSwgbCk7CiAgICAgICAgICBjb250ZXh0LmxpbmVUbyh4LCB5KTsKICAgICAgICAgIGNvbnRleHQuc3Ryb2tlKCk7CiAgICAgICAgfQogICAgICB9OwoKICAgICAgY29uc3QgbGluZWFyRXZhbHVhdGlvbiA9IChpLCBsKSA9PiB7CiAgICAgICAgaWYgKGwgPD0gMikgcmV0dXJuIDE7CiAgICAgICAgY29uc3QgbWF4ID0gNjsKICAgICAgICBjb25zdCBBID0gKG1heCAtIDEpIC8gKDIgLyBsIC0gMSk7CiAgICAgICAgY29uc3QgQiA9IDEgLSBBOwogICAgICAgIGNvbnN0IFggPSAoaSArIDIpIC8gbDsKICAgICAgICBsZXQgdmFsID0gQSAqIFggKyBCOwogICAgICAgIHZhbCA9IHZhbCA+PiAwOwogICAgICAgIHJldHVybiB2YWw7CiAgICAgIH07CgogICAgICByZXR1cm4gcmVuZGVyZXI7CiAgICB9LAoKICAgIHJlbmRlclByb3RvbigpIHsKICAgICAgdGhpcy5wcm90b24gJiYgdGhpcy5wcm90b24udXBkYXRlKCk7CiAgICB9CgogIH0sCgogIGJlZm9yZURlc3Ryb3koKSB7CiAgICB0cnkgewogICAgICB0aGlzLnByb3Rvbi5kZXN0cm95KCk7CiAgICAgIFJBRk1hbmFnZXIucmVtb3ZlKHRoaXMucmVuZGVyUHJvdG9uKTsKICAgIH0gY2F0Y2ggKGUpIHt9CiAgfQoKfTs="},{"version":3,"mappings":"AAYA;AACA;AACA;AACA;AAEA,gBACA,SADA,EAEA,SAFA,EAGA,SAHA,EAIA,SAJA,EAKA,SALA,EAMA,SANA;AAQA;EACAA,wBADA;EAEAC;IACAC;EADA,CAFA;EAKAC;IACAC,cADA;IAEAC,WAFA;IAGAC,aAHA;IAIAC,WAJA;IAKAC;EALA,CALA;EAYAC;IACAC;MACA;MACAC;IACA,CAJA;;IAKAC;MAAAC;MAAAC;IAAA;MACA;MACA;MACA;IACA,CATA;;IAUAC,qBAVA;;IAYAC;MACA;MACA;MACA;MAEA;MACAC;MACAA;MACAA;MACAA;MACAA,sBACA,oBACA,oBADA,EAEA,uBAFA,EAGA,OAHA,CADA;MAOAA,sBACA,6DADA;MAIA;QACAC,YADA;QAEAC;MAFA;MAKA;MACA,gDACA,sDADA,EAEA,OAFA;MAIAF,gEA/BA,CAgCA;;MACAA;MACAA;MACAA;MAEA;MACA;MACA;IACA,CApDA;;IAqDAG;MACA;MACA;MACA;MACA;;MAEAC;QACAC;MACA,CAFA;;MAIAD;QACAE;QACAA;MACA,CAHA;;MAKAF;QACAG;QACA;QACAC;QACAF;MACA,CALA;;MAOA;QACAA;QACAA;;QAEA;UACAA;UACAA;QACA;MACA,CARA;;MAUA;QACAD;QACAA;QACAA,YACAC,YADA,EAEAA,YAFA,EAGAA,eAHA,EAIA,CAJA,EAKAG,WALA,EAMA,IANA;QAQAJ;QACAA;MACA,CAbA;;MAeA;QACAA;QACAA;QAEAA;QAEA;;QACA;UACA;UACA;UAEAA;UACAA;UACAA;QACA;MACA,CAfA;;MAiBA;QACA;QAEA;QACA;QACA;QACA;QACA;QACAK;QAEA;MACA,CAXA;;MAaA;IACA,CAnIA;;IAoIAC;MACA;IACA;;EAtIA,CAZA;;EAoJAC;IACA;MACA;MACAlB;IACA,CAHA,CAGA;EACA;;AAzJA","names":["name","components","CanvasComp","props","canvas","bg","color","num","config","methods","canvasInited","RAFManager","canvasResize","width","height","canvasMouseDown","createProton","emitter","x","y","createRenderer","renderer","context","particle","drawTadpoleTail","drawTadpoleHead","Math","val","renderProton","beforeDestroy"],"sourceRoot":"node_modules/particles-bg-vue/src/particles-bg/particles","sources":["TadpoleParticles.vue"],"sourcesContent":["<template>\n  <canvas-comp\n    :bg=\"bg\"\n    :canvas=\"canvas\"\n    global-composite-operation=\"xor\"\n    v-on:canvasInited=\"canvasInited\"\n    v-on:canvasResize=\"canvasResize\"\n    v-on:canvasMouseDown=\"canvasMouseDown\"\n  />\n</template>\n\n<script>\nimport CanvasComp from \"./CanvasComp.vue\";\nimport Proton from \"proton-engine\";\nimport RAFManager from \"raf-manager\";\nimport { getColor } from \"../utils/Color\";\n\nconst colors = [\n  \"#fad390\",\n  \"#81ecec\",\n  \"#ffffff\",\n  \"#badc58\",\n  \"#f9ca24\",\n  \"#FEA47F\"\n];\nexport default {\n  name: \"TadpoleParticles\",\n  components: {\n    CanvasComp\n  },\n  props: {\n    canvas: Object,\n    bg: Boolean,\n    color: String,\n    num: Number,\n    config: {}\n  },\n  methods: {\n    canvasInited(canvas) {\n      this.createProton(canvas);\n      RAFManager.add(this.renderProton);\n    },\n    canvasResize({ width, height }) {\n      this.crossZoneBehaviour.zone.width = width;\n      this.crossZoneBehaviour.zone.height = height;\n      this.proton.renderers[0].resize(width, height);\n    },\n    canvasMouseDown(e) {},\n\n    createProton(canvas) {\n      const width = canvas.width;\n      const height = canvas.height;\n      this.proton = new Proton();\n\n      const emitter = new Proton.Emitter();\n      emitter.damping = 0.008;\n      emitter.rate = new Proton.Rate(this.num ? this.num : 50);\n      emitter.addInitialize(new Proton.Mass(1));\n      emitter.addInitialize(new Proton.Radius(5, 9));\n      emitter.addInitialize(\n        new Proton.Velocity(\n          new Proton.Span(1.5),\n          new Proton.Span(0, 360),\n          \"polar\"\n        )\n      );\n      emitter.addInitialize(\n        new Proton.Position(new Proton.RectZone(0, 0, width, height))\n      );\n\n      const mouseInfo = {\n        x: width / 2,\n        y: height / 2\n      };\n\n      const attractionBehaviour = new Proton.Attraction(mouseInfo, 0, 0);\n      const crossZoneBehaviour = new Proton.CrossZone(\n        new Proton.RectZone(0, 0, canvas.width, canvas.height),\n        \"bound\"\n      );\n      emitter.addBehaviour(new Proton.Color(this.color || \"#bbbbbb\"));\n      //emitter.addBehaviour(new Proton.Alpha(new Proton.Span(0.5, 1)));\n      emitter.addBehaviour(attractionBehaviour, crossZoneBehaviour);\n      emitter.addBehaviour(new Proton.RandomDrift(15, 15, 0.05));\n      emitter.emit(\"once\");\n\n      this.proton.addEmitter(emitter);\n      this.proton.addRenderer(this.createRenderer(canvas));\n      this.crossZoneBehaviour = crossZoneBehaviour;\n    },\n    createRenderer(canvas) {\n      const jointCount = 12;\n      const delayTime = 6;\n      const context = canvas.getContext(\"2d\");\n      const renderer = new Proton.CanvasRenderer(canvas);\n\n      renderer.onProtonUpdate = function() {\n        context.clearRect(0, 0, canvas.width, canvas.height);\n      };\n\n      renderer.onParticleCreated = particle => {\n        particle.data.points = [];\n        particle.data.index = 0;\n      };\n\n      renderer.onParticleUpdate = function(particle) {\n        drawTadpoleTail(particle);\n        if (particle.data.index % delayTime === 0) fillPointsData(particle);\n        drawTadpoleHead(particle);\n        particle.data.index++;\n      };\n\n      const fillPointsData = particle => {\n        particle.data.points.unshift(particle.p.y);\n        particle.data.points.unshift(particle.p.x);\n\n        if (particle.data.points.length > jointCount) {\n          particle.data.points.pop();\n          particle.data.points.pop();\n        }\n      };\n\n      const drawTadpoleHead = particle => {\n        context.fillStyle = particle.color;\n        context.beginPath();\n        context.arc(\n          particle.p.x,\n          particle.p.y,\n          particle.radius,\n          0,\n          Math.PI * 2,\n          true\n        );\n        context.closePath();\n        context.fill();\n      };\n\n      const drawTadpoleTail = particle => {\n        context.beginPath();\n        context.strokeStyle = particle.color;\n\n        context.moveTo(particle.p.x, particle.p.y);\n\n        const l = particle.data.points.length;\n        for (let i = 0; i < l; i += 2) {\n          const x = particle.data.points[i];\n          const y = particle.data.points[i + 1];\n\n          context.lineWidth = linearEvaluation(i, l);\n          context.lineTo(x, y);\n          context.stroke();\n        }\n      };\n\n      const linearEvaluation = (i, l) => {\n        if (l <= 2) return 1;\n\n        const max = 6;\n        const A = (max - 1) / (2 / l - 1);\n        const B = 1 - A;\n        const X = (i + 2) / l;\n        let val = A * X + B;\n        val = val >> 0;\n\n        return val;\n      };\n\n      return renderer;\n    },\n    renderProton() {\n      this.proton && this.proton.update();\n    }\n  },\n  beforeDestroy() {\n    try {\n      this.proton.destroy();\n      RAFManager.remove(this.renderProton);\n    } catch (e) {}\n  }\n};\n</script>\n"]}]}